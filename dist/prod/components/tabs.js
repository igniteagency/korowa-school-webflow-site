"use strict";(()=>{var s=class{component;tabs;currentTabIndex=0;intervalId=null;progressAnimations=new Map;autoplayTimer;intersectionObserver;isInView=!1;AUTOPLAY_TIMER_CSS_VAR="--autoplay-timer";PROGRESS_BAR_CSS_VAR="--progress-scale";constructor(t){this.component=t,this.tabs=Array.from(t.querySelectorAll("details"));let e=getComputedStyle(t).getPropertyValue(this.AUTOPLAY_TIMER_CSS_VAR).trim();if(this.autoplayTimer=parseFloat(e)*1e3,!t||this.tabs.length===0){console.warn("AutoRotatingTabs: No valid component or tabs found.");return}this.init()}init(){this.setupProgressAnimations(),this.setupEventListeners(),this.setupIntersectionObserver()}setupProgressAnimations(){this.tabs.forEach(t=>{gsap.set(t,{[this.PROGRESS_BAR_CSS_VAR]:0})})}setupEventListeners(){this.tabs.forEach((t,e)=>{t.addEventListener("toggle",()=>{t.open?this.handleTabOpen(e):this.handleTabClose(t)})})}setupIntersectionObserver(){this.intersectionObserver=new IntersectionObserver(t=>{t.forEach(e=>{e.target===this.component&&(this.isInView=e.isIntersecting,this.isInView?this.resumeAutoRotation():this.pauseAutoRotation())})},{threshold:.1}),this.intersectionObserver.observe(this.component)}handleTabOpen(t){this.tabs.forEach((e,i)=>{let r=this.progressAnimations.get(e);r&&r.kill(),i!==t&&e.open&&(e.closeAccordion(),this.resetProgress(e))}),this.currentTabIndex=t,this.isInView&&this.restartAutoRotation()}handleTabClose(t){this.resetProgress(t)}resetProgress(t){let e=this.progressAnimations.get(t);e&&e.kill(),gsap.set(t,{[this.PROGRESS_BAR_CSS_VAR]:0})}startAutoRotation(){if(!this.isInView)return;this.intervalId&&clearInterval(this.intervalId);let t=this.tabs.findIndex(i=>i.open);t!==-1?this.currentTabIndex=t:(this.tabs[0].openAccordion(),this.currentTabIndex=0);let e=this.tabs[this.currentTabIndex];e&&e.open&&this.startProgressAnimation(e),this.intervalId=window.setInterval(()=>{this.rotateToNext()},this.autoplayTimer)}pauseAutoRotation(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null);let t=this.tabs[this.currentTabIndex];if(t){let e=this.progressAnimations.get(t);e&&e.pause()}}resumeAutoRotation(){let t=this.tabs[this.currentTabIndex];if(t){let e=this.progressAnimations.get(t);e&&e.resume()}this.intervalId||(this.intervalId=window.setInterval(()=>{this.rotateToNext()},this.autoplayTimer))}restartAutoRotation(){this.startAutoRotation()}rotateToNext(){let t=this.tabs[this.currentTabIndex];t&&(t.closeAccordion(),this.resetProgress(t)),this.currentTabIndex=(this.currentTabIndex+1)%this.tabs.length;let e=this.tabs[this.currentTabIndex];e&&(e.openAccordion(),this.startProgressAnimation(e))}startProgressAnimation(t){let e=gsap.to(t,{[this.PROGRESS_BAR_CSS_VAR]:1,duration:this.autoplayTimer/1e3,ease:"none"});this.progressAnimations.set(t,e)}destroy(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.tabs.forEach(t=>{let e=this.progressAnimations.get(t);e&&e.kill(),this.resetProgress(t)}),this.progressAnimations.clear()}};function o(){document.querySelectorAll('[data-el="tabs-component"]').forEach(t=>{new s(t)})}window.Webflow=window.Webflow||[];window.Webflow?.push(()=>{o()});})();
